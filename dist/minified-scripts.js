let pokemonRepository=function(){let e=[],t=document.querySelector('.loading-message');function n(){t.classList.add('is-visible'),console.log('Loading...')}function o(){t.classList.remove('is-visible'),console.log('Done loading.')}function i(){return e}function a(e){pokemonRepository.loadDetails(e).then(function(){r(e)})}function s(e){let t=document.querySelector('.pokemon-list'),n=document.createElement('li'),o=document.createElement('button');n.classList.add('group-list-item'),o.innerText=e.name,o.classList.add('pokemon-button','btn','btn-primary','group-list-item'),o.setAttribute('data-toggle','modal'),o.setAttribute('data-target','#pokemon-modal'),n.appendChild(o),t.appendChild(n),o.addEventListener('click',()=>{a(e)})}function l(t){'object'==typeof t?['name','detailsUrl'].every(e=>e in t)?e.push(t):console.log('keys must be "name", "height", "weight", "types"'):console.log('must be an object')}function r(e){let t=$('.modal-body'),n=$('.modal-title');n.empty(),t.empty();let o=$('<h1>'+e.name+'</h1>'),i=$('<img class="modal-img" style="width:50%">');i.attr('src',e.imageUrl);let a=$('<p>height: '+e.height+'</p>'),s=$('<p>weight: '+e.weight+'</p>'),l=$('<p>types: '+e.types+'</p>');n.append(o),t.append(i),t.append(a),t.append(s),t.append(l)}return $('#searchBar').keyup(t=>{let n=t.target.value.toLowerCase(),o=e.filter(e=>e.name.toLowerCase().includes(n));$('.pokemon-button').remove(),o.forEach(function(e){s(e)})}),{getAll:i,add:l,findPokemonName:function t(n){return e.filter(e=>e.name===n)},addListItem:s,showDetails:a,loadList:function e(){return n(),fetch('https://pokeapi.co/api/v2/pokemon/?limit=150').then(function(e){return e.json()}).then(function(e){o(),e.results.forEach(function(e){l({name:e.name,detailsUrl:e.url})})}).catch(function(e){o(),console.error(e)})},loadDetails:function e(t){return fetch(t.detailsUrl).then(function(e){return e.json()}).then(function(e){t.imageUrl=e.sprites.front_default,t.height=e.height,t.weight=e.weight,t.types=e.types.map(e=>e.type.name).join(', ')}).catch(function(e){console.error(e)})},showLoadingMessage:n,hideLoadingMessage:o,showPokemonModal:r}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});